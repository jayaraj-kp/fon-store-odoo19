<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ============================================================
         Form View for Auto Logout Config
         Standalone view â€” no xpath inheritance, no parent view issues
    ============================================================ -->
    <record id="auto_logout_config_form_view" model="ir.ui.view">
        <field name="name">auto.logout.config.form</field>
        <field name="model">auto.logout.config</field>
        <field name="arch" type="xml">
            <form string="Auto Logout Settings" create="false" delete="false">
                <sheet>
                    <div class="oe_title">
                        <h1>Auto Logout Settings</h1>
                    </div>
                    <group>
                        <group string="Session Timeout Configuration">
                            <field name="logout_delay"
                                   string="Timeout (minutes)"
                                   help="Set to 0 to disable auto logout completely."/>
                        </group>
                        <group string="Information">
                            <div class="alert alert-info" role="alert" style="margin:8px 0;">
                                <p><strong>How it works:</strong></p>
                                <ul>
                                    <li>Users are logged out after the specified minutes of inactivity.</li>
                                    <li>A warning banner appears <strong>1 minute before</strong> logout.</li>
                                    <li>Any mouse, keyboard, or scroll activity resets the timer.</li>
                                    <li>Set to <strong>0</strong> to disable auto logout.</li>
                                </ul>
                            </div>
                        </group>
                    </group>
                </sheet>
                <footer>
                    <button name="save_config"
                            string="Save Settings"
                            type="object"
                            class="btn-primary"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Action to open config form -->
    <record id="auto_logout_config_action" model="ir.actions.act_window">
        <field name="name">Auto Logout Settings</field>
        <field name="res_model">auto.logout.config</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="auto_logout_config_form_view"/>
        <field name="target">current</field>
        <field name="context">{'auto_logout_new': True}</field>
    </record>

    <!-- ============================================================
         Menu: Settings > Technical > Auto Logout
    ============================================================ -->

    <!-- Top-level Settings menu (use existing if available) -->
    <menuitem id="auto_logout_menu_root"
              name="Settings"
              sequence="100"
              web_icon="base_setup,static/description/icon.png"
              groups="base.group_system"/>

    <menuitem id="auto_logout_menu_technical"
              name="Technical"
              parent="auto_logout_menu_root"
              sequence="200"
              groups="base.group_system"/>

    <menuitem id="auto_logout_menu_config"
              name="Auto Logout Settings"
              parent="auto_logout_menu_technical"
              action="auto_logout_config_action"
              sequence="10"
              groups="base.group_system"/>

</odoo>
