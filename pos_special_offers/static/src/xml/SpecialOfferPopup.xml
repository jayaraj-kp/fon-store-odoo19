<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="pos_special_offers.SpecialOfferPopup">
        <div class="special-offer-popup-overlay" t-on-click.self="onOverlayClick">
            <div class="special-offer-popup">

                <!-- Header -->
                <div class="popup-header">
                    <h3>üéÅ Create Special Offer</h3>
                    <span style="cursor:pointer;font-size:20px;" t-on-click="onClose">‚úï</span>
                </div>

                <!-- Body -->
                <div class="popup-body">

                    <!-- Offer Name -->
                    <div class="form-group">
                        <label>Offer Name *</label>
                        <input
                            type="text"
                            placeholder="e.g. Summer Sale, Happy Hour..."
                            t-att-value="state.offerName"
                            t-on-input="onOfferNameInput"
                        />
                    </div>

                    <!-- Products -->
                    <div class="form-group">
                        <label>Select Products (hold Ctrl for multi-select)</label>
                        <select multiple="multiple" t-on-change="onProductChange">
                            <t t-foreach="props.products" t-as="product" t-key="product.id">
                                <option t-att-value="product.id">
                                    <t t-esc="product.display_name"/>
                                </option>
                            </t>
                        </select>
                    </div>

                    <!-- Categories -->
                    <div class="form-group">
                        <label>Select POS Category (optional)</label>
                        <select t-on-change="onCategoryChange">
                            <option value="">-- No Category --</option>
                            <t t-foreach="props.categories" t-as="cat" t-key="cat.id">
                                <option t-att-value="cat.id">
                                    <t t-esc="cat.name"/>
                                </option>
                            </t>
                        </select>
                    </div>

                    <!-- Dates -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>From Date *</label>
                            <input
                                type="date"
                                t-att-value="state.dateFrom"
                                t-on-input="onDateFromInput"
                            />
                        </div>
                        <div class="form-group">
                            <label>To Date *</label>
                            <input
                                type="date"
                                t-att-value="state.dateTo"
                                t-on-input="onDateToInput"
                            />
                        </div>
                    </div>

                    <!-- Time -->
                    <div class="form-row">
                        <div class="form-group">
                            <label>Active From Time</label>
                            <input
                                type="time"
                                t-att-value="state.activeTime"
                                t-on-input="onTimeInput"
                            />
                        </div>
                        <div class="form-group">
                            <label>Discount Type</label>
                            <select t-on-change="onDiscountTypeChange">
                                <option value="percentage">Percentage (%)</option>
                                <option value="fixed">Fixed Price</option>
                            </select>
                        </div>
                    </div>

                    <!-- Discount Value -->
                    <div class="form-group">
                        <label>
                            <t t-if="state.discountType === 'percentage'">Discount % *</t>
                            <t t-else="">Fixed Price *</t>
                        </label>
                        <input
                            type="number"
                            t-att-placeholder="state.discountType === 'percentage' ? 'e.g. 10 for 10% off' : 'e.g. 99.99'"
                            t-att-value="state.discountValue"
                            t-on-input="onDiscountValueInput"
                        />
                    </div>

                    <!-- Success message -->
                    <div t-att-class="'success-msg ' + (state.showSuccess ? 'show' : '')">
                        ‚úÖ Offer "<t t-esc="state.lastCreatedName"/>" created successfully!
                    </div>

                    <!-- Error message -->
                    <t t-if="state.errorMsg">
                        <div style="background:#ffebee;color:#c62828;border:1px solid #ef9a9a;border-radius:7px;padding:10px 14px;font-size:13px;margin-top:10px;">
                            ‚ö†Ô∏è <t t-esc="state.errorMsg"/>
                        </div>
                    </t>

                </div>

                <!-- Footer -->
                <div class="popup-footer">
                    <button class="btn-cancel" t-on-click="onClose">Close</button>
                    <button class="btn-create" t-on-click="onCreateOffer" t-att-disabled="state.loading">
                        <t t-if="state.loading">Creating...</t>
                        <t t-else="">‚úÖ Create Offer</t>
                    </button>
                </div>

            </div>
        </div>
    </t>

</templates>
